<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WCIO</title>
    <link rel="stylesheet" href="styles.css" />
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="./images/favicon.ico" />
    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <!-- FontAwesome -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
      rel="stylesheet"
    />
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Advent+Pro:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Advent+Pro:ital,wght@0,100..900;1,100..900&family=Dosis:wght@200..800&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg">
      <div class="container-fluid">
        <a class="navbar-brand" href="./index.html"
          >Women Coders Inclusive Org</a
        >
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNavAltMarkup"
          aria-controls="navbarNavAltMarkup"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
          <ul class="navbar-nav ms-auto nav nav-underline">
            <li class="nav-item">
              <a class="nav-link" href="./index.html">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./about.html">About</a>
            </li>
            <li class="nav-item">
              <a
                class="nav-link active"
                aria-current="page"
                href="./networks.html"
                >Networks</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./volunteers.html">Volunteers</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="./code-of-conduct.html"
                >Code of Conduct</a
              >
            </li>
            <!-- Add other navbar buttons here -->
          </ul>
        </div>
      </div>
    </nav>

    <!-- Page Content and Right Column -->
    <div class="container">
      <div class="row">
        <!-- Page Content (twice as wide on md and above) -->
        <div class="col-md-8">
          <article id="main-message">
            <h2>Networks</h2>
            <p>
              With the shutdown of Women Who Code, we have hundreds of energized
              communities in which people have worked to help women thrive in
              technology careers. This emphatically includes trans women and
              genderqueer folks.
            </p>

            <p>
              That is the main vision which we hope to promote moving forward as
              an individual group, but especially with our sister groups. One
              benefit of WWCode was that it was searchable; it was possible to
              move to a new city and find a group with shared values and target
              audience, and this list is to host a centralized directory.
            </p>

            <p>
              To add a group, first make sure the group agrees to the above and
              include a link to your Code of Conduct in the comments of your PR:
              <a
                href="https://github.com/WomenCodersInclusiveOrganization/website/tree/main"
                target="_blank"
                >WomenCodersInclusiveOrganization/website</a
              >
            </p>
          </article>
          <div id="network-tiles" class="row">
            <!-- Network tiles dynamically inserted here -->
          </div>
        </div>

        <!-- Right Column -->
        <div class="col-md-4">
          <div id="right-column">
            <a href="./sponsor.html">
              <button class="btn btn-primary custom-btn">Sponsor Us</button>
            </a>
            <!-- <button type="button" class="btn btn-primary">Get Swag</button> -->
            <div id="upcoming-meetups">
              <h3>Upcoming Meetups</h3>
              <div id="event-tiles"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
  <!-- Footer -->
  <footer class="footer mt-auto py-3">
    <div class="container">
      <!-- Social Media Links -->
      <div id="social-media-links">
        <ul class="list-unstyled d-flex justify-content-center">
          <li class="me-3">
            <a
              href="https://www.meetup.com/women-coders-inclusive-organization/"
              target="_blank"
              ><i class="fa-brands fa-meetup fa-2x" style="color: #0797b1"></i
            ></a>
          </li>
          <li class="me-3">
            <a
              href="https://www.linkedin.com/company/women-coders-san-diego/"
              target="_blank"
              ><i
                class="fa-brands fa-linkedin-in fa-2x"
                style="color: #0797b1"
              ></i
            ></a>
          </li>
          <li class="me-3">
            <a href="mailto: womencodersio@gmail.com" target="_blank"
              ><i class="fa-solid fa-envelope fa-2x" style="color: #0797b1"></i
            ></a>
          </li>
          <!-- <li>
              <a href="#"><i class="fa-brands fa-slack-hash fa-2x"></i></a>
            </li> -->
        </ul>
        <p class="text-center mb-0">
          Â© 2024 Women Coders Inclusive Org - San Diego. All Rights Reserved.
        </p>
      </div>
    </div>
  </footer>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>

  <script type="module">
    import folderNames from './networks_config.js';

    document.addEventListener('DOMContentLoaded', function () {
      async function fetchNetworkTiles() {
        const networkTiles = [];
        for (const folderName of folderNames) {
          const yamlResponse = await fetch(
            `/networks/${folderName}/config.yaml`
          );
          const yamlData = await yamlResponse.text();
          const networkData = jsyaml.load(yamlData);
          networkData.forEach((tile) => {
            tile.folderName = folderName;
          });
          networkTiles.push(...networkData);
        }
        return networkTiles;
      }

      function createNetworkTiles(networkData) {
        let tilesHTML = '';
        networkData.forEach((network) => {
          const { name, city, country_code, links, folderName } = network;
          const logoSrc =
            links && links.logo
              ? `./networks/${folderName}/${links.logo}`
              : 'https://www.svgrepo.com/show/508699/landscape-placeholder.svg';

          const tileHTML = `
            <div class="network-tile col-md-6">
              <div class="network-card">
                <img src="${logoSrc}" class="network-card-img" alt="${name} Logo"/>
                <div class="network-card-body">
                  <h5 class="network-card-title">${name}</h5>
                  <p>${city}, ${country_code}</p>
                  <div class="links">
                    ${generateLinks(links)}
                  </div>
                </div>
              </div>
            </div>
          `;
          tilesHTML += tileHTML;
        });
        return tilesHTML;
      }

      async function insertNetworkTiles() {
        const networkTilesContainer = document.getElementById('network-tiles');
        const networkTiles = await fetchNetworkTiles();
        const tilesHTML = createNetworkTiles(networkTiles);
        networkTilesContainer.innerHTML = tilesHTML;
      }

      function generateLinks(links) {
        let linksHTML = '';
        if (links && typeof links === 'object') {
          for (const [key, value] of Object.entries(links)) {
            if (value && value.trim() !== '' && key !== 'logo') {
              const iconClass = getIconClass(key);
              linksHTML += `
                <a href="${value}" target="_blank" class="link">
                  <i class="${iconClass}" style="color: #0797B1"></i>
                </a>
              `;
            }
          }
        }
        return linksHTML;
      }

      function getIconClass(key) {
        const iconClasses = {
          website: 'fa-solid fa-earth-americas',
          linkedin: 'fa-brands fa-linkedin',
          meetup: 'fa-brands fa-meetup',
          instagram: 'fa-brands fa-instagram',
          discord: 'fa-brands fa-discord',
          coc: 'fa-solid fa-file-lines',
        };
        return iconClasses[key] || '';
      }

      insertNetworkTiles();
    });
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js"></script>

  <script type="module">
    import jsyaml from 'https://cdn.skypack.dev/js-yaml';

    document.addEventListener('DOMContentLoaded', function () {
      async function fetchEventData() {
        const eventData = [];
        // Loop through possible event filenames
        for (let i = 1; i <= 2; i++) {
          try {
            const yamlResponse = await fetch(
              `/upcoming_meetups/event_${i}.yaml`
            );
            const yamlData = await yamlResponse.text();
            const eventDataPart = jsyaml.load(yamlData);
            if (eventDataPart) {
              eventData.push(...eventDataPart);
            }
          } catch (error) {
            console.error(`Error fetching event_${i}.yaml:`, error);
          }
        }
        return eventData;
      }

      function createEventTiles(eventData) {
        let tilesHTML = '';
        eventData.forEach((event) => {
          if (
            event &&
            event.title &&
            event.date &&
            event.time &&
            event.address &&
            event.link
          ) {
            const { image, title, date, time, address, link } = event;

            const tileHTML = `
            <div class="event-tile">
              <div class="event-card">
                <img src="${
                  image ||
                  'https://www.svgrepo.com/show/508699/landscape-placeholder.svg'
                }" class="event-card-img" alt="${title || 'Event'} Image"/>
                <div class="event-card-body">
                  <h5 class="event-card-title">${title || 'Untitled Event'}</h5>
                  <p>${date}<br>${time}<br>${address}</p>
                  <div class="event-links">
                    <a href="${link}" target="_blank" class="btn btn-primary custom-event-btn">Read More</a>
                  </div>
                </div>
              </div>
            </div>
          `;
            tilesHTML += tileHTML;
          }
        });
        return tilesHTML;
      }

      async function insertEventTiles() {
        const eventTilesContainer = document.getElementById('event-tiles');
        const eventData = await fetchEventData();
        const tilesHTML = createEventTiles(eventData);
        eventTilesContainer.innerHTML = tilesHTML;
      }

      insertEventTiles();
    });
  </script>

  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://kit.fontawesome.com/494bbb1676.js"
    crossorigin="anonymous"
  ></script>
</html>
